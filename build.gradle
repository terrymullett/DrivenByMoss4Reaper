plugins {
    id 'com.github.jk1.dependency-license-report' version '1.2'
    id 'com.github.ben-manes.versions' version '0.20.0'
    id 'java' 
    id 'application'
    id 'eclipse'
}

version = '3.00'

jar {
    manifest {
        attributes(
            'Implementation-Title': 'DrivenByMoss4Reaper',
            'Implementation-Version': version,
            'Implementation-Vendor': 'Juergen Mossgraber'
        )
    }
}

distTar.enabled = false
startScripts.enabled = false

applicationDistribution.from('src/main/cpp') {
    into "lib"
}
applicationDistribution.from('build/reports/dependency-license') {
    into "license/dependency"
}

installDist {
    doLast {
        File subdir = new File (destinationDir, '/lib/drivenbymoss-libs')
        subdir.mkdirs ()
        String sourceDir = new File (destinationDir, '/lib').getAbsolutePath()
        String destDir = subdir.getAbsolutePath()
        ant.move (todir: destDir) {
            fileset(dir: sourceDir) {
                include(name: '**.jar')
            }
        }
    }
}

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}

repositories {
    jcenter()
}

dependencies {
    compile group: 'org.apache.xmlgraphics', name: 'batik-anim', version: '1.9.1'
    compile group: 'org.apache.xmlgraphics', name: 'batik-transcoder', version: '1.9.1'
    compile group: 'org.usb4java', name: 'usb4java', version: '1.2.0'
    compile group: 'com.illposed.osc', name: 'javaosc-core', version: '0.4'
    compile group: 'uk.co.xfactory-librarians', name: 'coremidi4j', version: '1.1'
	compile group: 'com.nikhaldimann', name: 'inieditor', version: 'r6'    
	compile fileTree(dir: 'libs', include: '*.jar')
}
